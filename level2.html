<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Memory Game</title>
    <link rel="stylesheet" href="level3.css">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


</head>
<body>
<div class="container">
    <h2>Memory Game</h2>
    <div id="time">01:00</div>
    <div class="game"></div>
    <button class="reset" onclick="window.location.reload();">Reset game</button>
</div>

<script>
    const emojis = ['🦊', '🦊', '🐶', '🐶', '🐰', '🐰', '🐸', '🐸', '🐵', '🐵', '🐯', '🐯', '🐷', '🐷', '🐹', '🐹'];

    function startTimer(duration, display) {
        let timer = duration, minutes, seconds;
        const interval = setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            display.textContent = minutes + ":" + seconds;

            if (--timer < 0) {
                clearInterval(interval);
                swal({
                    title: "Time's up!",
                    text: "Game over.",
                    icon: "error",
                    buttons: false,
                    timer: 2000 // Automatically close after 2 seconds
                }).then(() => {
                    window.location.reload();
                });
            }
        }, 1000);
        return interval;
    }

    function initializeGame() {
        const shur_emojis = emojis.sort(() => (Math.random() > 0.5) ? 2 : -1);
        const gameContainer = document.querySelector('.game');
        gameContainer.innerHTML = '';

        for (let i = 0; i < shur_emojis.length; i++) {
            let box = document.createElement('div');
            box.className = 'item';
            box.innerHTML = shur_emojis[i];

            box.onclick = function () {
                this.classList.add('boxOpen');
                setTimeout(function () {
                    const openBoxes = document.querySelectorAll('.boxOpen');
                    if (openBoxes.length > 1) {
                        if (openBoxes[0].innerHTML === openBoxes[1].innerHTML) {
                            openBoxes[0].classList.add('boxMatch');
                            openBoxes[1].classList.add('boxMatch');

                            openBoxes[0].classList.remove('boxOpen');
                            openBoxes[1].classList.remove('boxOpen');

                            if (document.querySelectorAll('.boxMatch').length === shur_emojis.length) {
                                clearInterval(timer);
                                swal("You win!!!")
                            }
                        } else {
                            openBoxes[0].classList.remove('boxOpen');
                            openBoxes[1].classList.remove('boxOpen');
                        }
                    }
                }, 500);
            };
            gameContainer.appendChild(box);
        }

        const thirtySeconds = 60 * 1,
            display = document.querySelector('#time');
        timer = startTimer(thirtySeconds, display);
    }

    let timer;
    initializeGame();
</script>
</body>
</html>
